<?php

// =============================
// 厳格な型チェックを有効化
// 引数・戻り値の型ミスを防ぐ（PHP 7+ 推奨）
// =============================
declare(strict_types=1);


// =============================
// セッション開始
// ログイン状態をセッションで管理するため必須
// =============================
session_start();


// =============================
// ログイン状態を判定する関数
// =============================
function is_logged_in(): bool
{
    // セッションに user_id が存在すればログイン中と判断
    return isset($_SESSION['user_id']);
}


// =============================
// 未ログインならログイン画面へ強制リダイレクト
// =============================
function require_login(): void
{
    // ログインしていなければ
    if (!is_logged_in()) {
        // ログイン画面へ移動
        header('Location: /login.php');

        // 以降の処理を強制終了（重要）
        exit;
    }
}
